<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member">
	<select id="selectOneMember" parameterType="m" resultType="m">
	select 
		member_no as memberNo,
		biz_no as bizNo,
		biz_name as bizName,
		member_id as memberId,
		member_pw as memberPw,
		member_name as memberName,
		member_level as memberLevel,
		member_gender as memberGender,
		member_birth as memberBirth,
		member_postcode as memberPostcode,
		member_addr1 as memberAddr1,
		member_addr2 as memberAddr2,
		member_point as memberPoint
	from member where member_id=#{memberId} and member_pw=#{memberPw}
	</select>
  	<insert id="insertMember" parameterType="m">
  		insert into member values (member_seq.nextval,
  		<choose>
  			<when test="memberLevel.equals(2)">
  			null,null
  			</when>
  			<when test="memberLevel.equals(1)">
  			#{bizNo},#{bizName}
  			</when>
  		</choose>
  		,#{memberId},#{memberPw},#{memberName},#{memberPhone},#{memberLevel},#{memberGender},#{memberBirth},#{memberPostcode},#{memberAddr1},#{memberAddr2},3000)
  	</insert>
  	<update id="newPw">
  	update member set member_pw=#{memberPw} where member_id=#{memberId}
  	</update>
  	<delete id="deleteMember" parameterType="int">
  		delete from member where member_no=#{memberNo} 
  	</delete>
</mapper>
