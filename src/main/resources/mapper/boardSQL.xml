<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="board">
  	<select id="selectCommentList" parameterType="map" resultType="bo">
		select * from 
		(SELECT ROWNUM AS RNUM,C.*FROM
          (SELECT 
			    COMMENT_NO as commentNo,
			    DIV_NO as divNo,
			    CASE
			        WHEN DIV_NO = 1
			        THEN (SELECT FUNDING_NAME FROM FUNDING WHERE FUNDING_NO = C.PROJECT_NO)
			        WHEN DIV_NO = 2
			        THEN (SELECT DONATION_TITLE FROM DONATION WHERE PROJECT_NO = C.PROJECT_NO)
			        WHEN DIV_NO = 3
			        THEN (SELECT PROJECT_NAME FROM GROUP_TBL WHERE PROJECT_NO = C.PROJECT_NO)
			        WHEN DIV_NO = 4
			        THEN (SELECT PROJECT_NAME FROM AUCTION_TBL WHERE PROJECT_NO = C.PROJECT_NO)
			    END
			    as projectName,
			    comment_content as commentContent,
			    comment_date as commentDate
			FROM COMMENT_TBL C WHERE MEMBER_NO = #{memberNo} ORDER BY 1 DESC)C)
            where rnum between #{start} and #{end}
  	</select>
  	<select id="selectLikeList" parameterType="map" resultType="bo">
			
  	</select>
  	<select id="selectOrderList" parameterType="map" resultType="bo">
				
  	</select>
  	<select id="selectQnaList" parameterType="map" resultType="bo">
			
  	</select>
  	<select id="selectCount" parameterType="map" resultType="int">
  		select count(*) from
  		<choose>
  			<when test="#{boardName.equals('comment_tbl')}"> 
  				comment_tbl
  			</when>
  			<when test="#{boardName.equals('like_tbl')}"> 
  				like_tbl
  			</when>
  			<when test="#{boardName.equals('order_tbl')}"> 
  				order_tbl
  			</when>
  			<when test="#{boardName.equals('qna_tbl')}"> 
  				qna_tbl
  			</when>
  		</choose> 
  		where member_no=#{memberNo}
  	</select>
</mapper>
