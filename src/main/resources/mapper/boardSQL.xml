<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="board">
  	<select id="selectCommentList" parameterType="map" resultType="c">
		select
			comment_no as commentNo, 
			div_no as divNo,
			project_no as projectNo,
			comment_content as commentContent,
			substr(comment_date,1,10) as commentDate
		 from 
		(select rownum as rnum, c.* from 
		(select * from comment_tbl where member_no=#{memberNo} order by comment_no desc)c) 
		where rnum between #{start} and #{end}  		
  	</select>
  	
  	
  	<select id="selectLikeList" parameterType="map" resultType="l">
		select * from 
		(select rownum as rnum, c.* from 
		(select
			div_no as divNo,
			project_no as projectNo,
			comment_content as commentContent,
			substr(comment_date,1,10) as commentDate,
			comment_no as commentNo
		from like_tbl where member_no=#{memberNo} order by like_no desc)c) 
		where rnum between #{start} and #{end}  		
  	</select>
  	<select id="selectOrderList" parameterType="map" resultType="o">
		select * from 
		(select rownum as rnum, c.* from 
		(select
			div_no as divNo,
			project_no as projectNo,
			comment_content as commentContent,
			substr(comment_date,1,10) as commentDate,
			comment_no as commentNo
		from order_tbl where member_no=#{memberNo} order by order_no desc)c) 
		where rnum between #{start} and #{end}  		
  	</select>
  	<select id="selectQnaList" parameterType="map" resultType="q">
		select * from 
		(select rownum as rnum, c.* from 
		(select
			div_no as divNo,
			project_no as projectNo,
			comment_content as commentContent,
			substr(comment_date,1,10) as commentDate,
			comment_no as commentNo
		from qna_tbl where member_no=#{memberNo} order by qna_no desc)c) 
		where rnum between #{start} and #{end}  		
  	</select>
  	<select id="selectCount" parameterType="map" resultType="int">
  		select count(*) from
  		<choose>
  			<when test="#{boardName.equals('comment_tbl')}"> 
  				comment_tbl
  			</when>
  			<when test="#{boardName.equals('like_tbl')}"> 
  				like_tbl
  			</when>
  			<when test="#{boardName.equals('order_tbl')}"> 
  				order_tbl
  			</when>
  			<when test="#{boardName.equals('qna_tbl')}"> 
  				qna_tbl
  			</when>
  		</choose> 
  		where member_no=#{memberNo}
  	</select>
</mapper>
